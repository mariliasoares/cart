<section class="cart-container">
  <div>
    <button mat-icon-button aria-label="Close Cart" (click)="closeCart()">
      <mat-icon>close</mat-icon>
    </button>
    <h2>Cart</h2>
  </div>

  <div class="cart-content-wrapper">
    <ng-container *ngIf="!cartEmpty(); else emptyCart">
      <ul class="stocked-cart" *ngFor="let item of cartItems(); index as i">
        <li class="cart-item">
          <div class="item-image-wrapper">
            <img [src]="item.info.images[0]" [alt]="item.info.title" />
          </div>
          <div class="item-information">
            <h3>{{ item.info.title }}</h3>
            <mat-select [formControl]="productAmount" [value]="item.amount" panelClass="select">
              <mat-option
              *ngFor="let amount of amountOfProducts"
              [value]="amount"
              (click)="handleProductAmountChange(item, i, productAmount.value)" 
                >{{ amount }}</mat-option
              >
            </mat-select>

            <span>{{ item.totalPrice | currency }}</span>
          </div>
          <div class="item-actions">
            <button mat-icon-button (click)="deleteItem(item.info.id)">
              <mat-icon color="warn">delete</mat-icon>
            </button>
          </div>
        </li>
      </ul>
    </ng-container>
  </div>
</section>

<!-- Cart checkout-->
<div class="cart-checkout">
  <div class="cart-price-summary">
    <p>Subtotal</p>
    <span>{{ cartSubtotal() | currency }}</span>
  </div>
  <div class="cart-price-summary">
    <h3>Total</h3>
    <span>{{ cartTotal() | currency }}</span>
  </div>
  <button mat-flat-button color="primary" class="bnt-checkout">Checkout</button>
</div>

<ng-template #emptyCart>
  <div class="empty-cart">
    <p>Your cart is empty.</p>
    <mat-icon>shopping_cart</mat-icon>
  </div>
</ng-template>
